<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ê°€ìœ„ë°”ìœ„ë³´ ê²Œì„</title>
    <link rel="stylesheet" href="../../css/common.css" />
    <!-- <link rel="stylesheet" href="./css/style.css" /> -->
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 0;
            padding: 0;
            background-color: #f8f9fa;
        }

        .container {
            width: 90%;
            max-width: 600px;
            margin: 0 auto;
        }

        main {
            margin-top: 30px;
        }

        button {
            margin: 10px;
            padding: 12px 24px;
            font-size: 18px;
            border: none;
            border-radius: 8px;
            background-color: #4caf50;
            color: white;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s;
            /* ì• ë‹ˆë©”ì´ì…˜ */
        }

        button:hover {
            background-color: #45a049;
            transform: scale(1.1);
            /* ë²„íŠ¼ ì• ë‹ˆë©”ì´ì…˜ */
        }

        #result,
        #score {
            margin-top: 20px;
            font-size: 20px;
        }

        @media (max-width: 600px) {
            button {
                width: 80%;
                max-width: 250px;
                margin: 10px auto;
                display: block;
                font-size: 20px;
            }
        }
    </style>

</head>

<body>
    <header>
        <div class="container">
            <h1>ê°€ìœ„ë°”ìœ„ë³´ ê²Œì„</h1>
            <a href="../../index.html" class="back-btn">ë’¤ë¡œ</a>
        </div>
    </header>

    <main>
        <div>
            <button onclick="play('ê°€ìœ„')">ê°€ìœ„</button>
            <button onclick="play('ë°”ìœ„')">ë°”ìœ„</button>
            <button onclick="play('ë³´')">ë³´</button>
        </div>

        <div id="result"></div>
        <div id="score"></div>

        <div style="margin-top:20px;">
            <button onclick="resetGame()">ë‹¤ì‹œ ì‹œì‘!</button>
        </div>
    </main>

    <footer>
        <div class="container">
            í•œ ê±¸ìŒì”©, ê¿ˆì„ í–¥í•´ ğŸŒŸ
        </div>
    </footer>

    <script>
        let wins = 0;
        let losses = 0;
        let draws = 0;
        let rounds = 0; // ì´ ëª‡ íŒ í–ˆëŠ”ì§€

        let isPlaying = false; // ì§€ê¸ˆ ê²Œì„ ì¤‘ì¸ì§€ ì²´í¬í•˜ëŠ” ë³€ìˆ˜ ì¶”ê°€

        function setButtonsDisabled(disabled) {
            const buttons = document.querySelectorAll('main button');
            buttons.forEach(button => {
                button.disabled = disabled;
            });
        }


        function play(userChoice) {
            if (isPlaying) return; // ë§Œì•½ ì§„í–‰ ì¤‘ì´ë©´ í´ë¦­ ë¬´ì‹œ
            isPlaying = true; // í´ë¦­í•˜ë©´ ë°”ë¡œ ì§„í–‰ ì¤‘ìœ¼ë¡œ ë°”ê¾¸ê¸°
            setButtonsDisabled(true); // ë²„íŠ¼ ë¹„í™œì„±í™”

            const choices = ['ê°€ìœ„', 'ë°”ìœ„', 'ë³´'];
            const computerChoice = choices[Math.floor(Math.random() * 3)];
            const randomComment = [
                'ì´ë²ˆì—” ì˜í–ˆì£ ? ğŸ˜‰',
                'ë‹¤ìŒì—” ì´ê¸¸ê²Œìš”! ğŸ˜',
                'ì–´ë¼? ì‹¤ìˆ˜í–ˆë‚˜...? ğŸ™ˆ',
                'ìŠ¹ë¶€ëŠ” ì–¸ì œë‚˜ ì˜ˆì¸¡ë¶ˆê°€! ğŸ²'
            ];

            let result = '';
            let comment = '';
            let emoji = '';

            if (userChoice === computerChoice) {
                result = 'ë¹„ê²¼ìŠµë‹ˆë‹¤!';
                draws++;
                comment = 'ì¢‹ì€ ìŠ¹ë¶€ì˜€ì–´ìš”! ğŸ¤';
                emoji = 'ğŸ¤';
            } else if (
                (userChoice === 'ê°€ìœ„' && computerChoice === 'ë³´') ||
                (userChoice === 'ë°”ìœ„' && computerChoice === 'ê°€ìœ„') ||
                (userChoice === 'ë³´' && computerChoice === 'ë°”ìœ„')
            ) {
                result = 'ì´ê²¼ìŠµë‹ˆë‹¤!';
                wins++;
                comment = 'ëŒ€ë‹¨í•´ìš”! ğŸ†';
                emoji = 'ğŸ†';
            } else {
                result = 'ì¡ŒìŠµë‹ˆë‹¤!';
                losses++;
                comment = 'ì•„ì‰½ë„¤ìš”... ë‹¤ì‹œ ë„ì „! ğŸ˜­';
                emoji = 'ğŸ˜­';
            }

            rounds++;

            // ê°€ë” ëœë¤ ë©˜íŠ¸ ì¶”ê°€
            if (Math.random() < 0.3) { // 30% í™•ë¥ 
                comment += `<br><small>${randomComment[Math.floor(Math.random() * randomComment.length)]}</small>`;
            }

            // ìŠ¹ë¦¬/íŒ¨ë°° ì¶”ê°€
            if (wins === 3) {
                comment += `<br><strong>ì™•ì¤‘ì™•! ğŸ…</strong>`;
            } else if (losses === 3) {
                comment += `<br><strong>ë‹¤ìŒì—” ë¶„ë°œí•´ìš”! ğŸ’ª</strong>`;
            }

            document.getElementById('result').innerHTML = `
            <p>ë‹¹ì‹ : ${userChoice}<br>ì»´í“¨í„°: ${computerChoice}</p>
            <h2>${emoji} ${result}</h2>
            <p>${comment}</p>
          `;

            document.getElementById('score').innerHTML = `
            <p>ğŸ† ìŠ¹: ${wins} | ğŸ˜­ íŒ¨: ${losses} | ğŸ¤ ë¬´: ${draws} | ğŸ”¢ ${rounds}íŒ ì§„í–‰</p>
          `;

            // ë°°ê²½ìƒ‰ ëœë¤ ë³€ê²½
            const randomColor = `hsl(${Math.random() * 360}, 100%, 90%)`;
            document.body.style.backgroundColor = randomColor;

            // 5íŒ 3ì„ ìŠ¹ì œ ì²´í¬
            if (rounds >= 5 || wins === 3 || losses === 3) {
                setTimeout(() => {
                    alert(`ê²Œì„ ì¢…ë£Œ!\nğŸ† ìŠ¹: ${wins}\nğŸ˜­ íŒ¨: ${losses}\nğŸ¤ ë¬´: ${draws}`);
                    resetGame();
                    isPlaying = false; // ê²Œì„ ë¦¬ì…‹ í›„ í´ë¦­ ê°€ëŠ¥í•˜ê²Œ ë³€ê²½
                    setButtonsDisabled(false); // ê²Œì„ ë¦¬ì…‹ë˜ë©´ ë‹¤ì‹œ ë²„íŠ¼ í™œì„±í™”
                }, 500);
            } else {
                // ê²Œì„ì´ ì•ˆ ëë‚¬ìœ¼ë©´ ë°”ë¡œ í´ë¦­ ê°€ëŠ¥í•˜ê²Œ
                setTimeout(() => {
                    isPlaying = false;
                    setButtonsDisabled(false); // ê²Œì„ ë¦¬ì…‹ë˜ë©´ ë‹¤ì‹œ ë²„íŠ¼ í™œì„±í™”
                }, 500); // ì•½ê°„ì˜ ì‹œê°„ ì£¼ê¸°
            }
        }

        function resetGame() {
            wins = 0;
            losses = 0;
            draws = 0;
            rounds = 0;
            document.getElementById('result').innerHTML = '';
            document.getElementById('score').innerHTML = '';
            document.body.style.backgroundColor = '#f8f9fa'; // ì´ˆê¸° ë°°ê²½ìƒ‰
        }
    </script>
</body>

</html>